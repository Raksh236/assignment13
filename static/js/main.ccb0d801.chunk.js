(this.webpackJsonpassignment13=this.webpackJsonpassignment13||[]).push([[0],{10:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),s=n.n(o),c=(n(9),n(1));class l extends a.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this)}handleChange(e){const t=e.target.value,n=e.target.name;this.props.onFilter({[n]:t})}render(){return r.a.createElement("form",{className:"mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search...",name:"filterText",onChange:this.handleChange}))}}var i=l;class h extends a.Component{constructor(e){super(e),this.destroy=this.destroy.bind(this)}destroy(){this.props.onDestroy(this.props.product.id)}render(){const{product:e}=this.props.product;return r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.category),r.a.createElement("td",null,"$",e.price),r.a.createElement("td",null,e.instock?"Yes":"No"),r.a.createElement("td",{className:"text-right"},r.a.createElement("button",{onClick:this.destroy,className:"btn btn-info btn-sm"},"Delete")))}}var d=h;class u extends a.Component{constructor(e){super(e),this.handleDestroy=this.handleDestroy.bind(this)}handleDestroy(e){this.props.onDestroy(e)}render(){const e=Object.keys(this.props.products).map(e=>this.props.products[e]),t=[],n=(this.props.filterText||"").toLowerCase();return e.forEach(e=>{-1!==(e.product&&e.product.name||"").toLowerCase().indexOf(n)&&t.push(r.a.createElement(d,{product:e,key:e.id,onDestroy:this.handleDestroy}))}),r.a.createElement("div",null,r.a.createElement("table",{className:"table table-striped table-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"In Stock"),r.a.createElement("th",null,"\xa0"))),r.a.createElement("tbody",null,t)))}}var m=u;const p={id:"",productid:"",category:"",price:"",name:"",instock:!0};class E extends a.Component{constructor(e){super(e),this.handleChange=this.handleChange.bind(this),this.handleSave=this.handleSave.bind(this),this.state={product:Object(c.a)({},p),errors:{}}}handleChange(e){const t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(e=>({product:Object(c.a)(Object(c.a)({},e.product),{},{[a]:n})}))}handleSave(e){e.preventDefault(),this.props.onSave(this.state.product),this.setState({product:Object(c.a)({},p),errors:{}})}render(){const{name:e,category:t,price:n,instock:a}=this.state.product;return r.a.createElement("form",{onSubmit:this.handleSave},r.a.createElement("h4",null,"Add a new product"),r.a.createElement("p",null,r.a.createElement("label",null,"Name",r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"name",onChange:this.handleChange,value:e}))),r.a.createElement("p",null,r.a.createElement("label",null,"Category",r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"category",onChange:this.handleChange,value:t}))),r.a.createElement("p",null,r.a.createElement("label",null,"Price",r.a.createElement("br",null),r.a.createElement("input",{type:"number",step:"0.01",className:"form-control",name:"price",onChange:this.handleChange,value:n}))),r.a.createElement("p",null,r.a.createElement("label",null,"In Stock",r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"instock",checked:a,onChange:this.handleChange})," ",r.a.createElement("span",null,a?"Yes":"No"))),r.a.createElement("input",{type:"submit",className:"btn btn-info",value:"Save"}))}}var b=E;const y="https://assignment13-backend.onrender.com";class g extends a.Component{constructor(e){super(e),this.state={filterText:"",products:{}},this.handleFilter=this.handleFilter.bind(this),this.handleDestroy=this.handleDestroy.bind(this),this.handleSave=this.handleSave.bind(this)}componentDidMount(){fetch("".concat(y,"/product/get/")).then(e=>e.json()).then(e=>{const t={};e.forEach(e=>{t[e.id]=e}),this.setState({products:t})}).catch(e=>{console.error("Error fetching products:",e)})}handleFilter(e){this.setState(e)}handleSave(e){const t=e.id||Date.now(),n={id:t,product:{productid:e.productid||t,category:e.category,price:parseFloat(e.price||0),name:e.name,instock:"boolean"!==typeof e.instock||e.instock}},a=!e.id,r=a?"".concat(y,"/product/create"):"".concat(y,"/product/update/").concat(t);fetch(r,{method:a?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{this.setState(t=>{const n=Object(c.a)({},t.products);return n[e.id]=e,{products:n}})}).catch(e=>{console.error("Error saving product:",e)})}handleDestroy(e){fetch("".concat(y,"/product/delete/").concat(e),{method:"DELETE"}).then(()=>{this.setState(t=>{const n=Object(c.a)({},t.products);return delete n[e],{products:n}})}).catch(e=>{console.error("Error deleting product:",e)})}render(){return r.a.createElement("div",null,r.a.createElement("h1",null,"My Inventory"),r.a.createElement(i,{onFilter:this.handleFilter}),r.a.createElement(m,{products:this.state.products,filterText:this.state.filterText,onDestroy:this.handleDestroy}),r.a.createElement(b,{onSave:this.handleSave}))}}var v=g;var f=function(){return r.a.createElement("div",{className:"container mt-4"},r.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},4:function(e,t,n){e.exports=n(10)},9:function(e,t,n){}},[[4,1,2]]]);
//# sourceMappingURL=main.ccb0d801.chunk.js.map